.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "hswatchd" "8" "21.04.2024" "hswatchd 2.12.5 Beta" "hswatchd - copyright Hesti"
.hy
.SH NAME
.PP
\f[B]hswatchd\f[R] - Ein Daemon zum Ueberwachen von Dateien
.SH SYNOPSIS
.PP
Daemonen werden ueber \[lq]systemd\[rq] gestartet.
Dieser ueberwacht Dateien auf Aenderung und fuehrt, wenn vorhanden,
einen Befehl aus.
.SH DESCRIPTION
.PP
hswatchd ist ausgelegt auf kleinst moegliche CPU-Performance.
Er wird ueber den \f[I]systemd\f[R] gestartet.
Wer moechte kann sich gerne auch eine init-Loesung schreiben.
.PD 0
.P
.PD
Alle Parameter werden in der \f[B]\f[BI]/etc/hswatchd.rc\f[B]\f[R]
eingetragen.
.SH OPTIONS
.PP
\f[B]--version \f[R] :die aktuelle Version ausgeben lassen.
Das Programm wird allerdings dann beendet.
.PP
Da hswatchd als Daemon gestartet wird, gibt es fuer den Betrieb keine
Optionen.
.SH SIGNALS
.TP
\f[B]SIGHUP,SIGKILL,SIGINT\f[R]
Der Daemon wird beendet
.TP
\f[B]SIGUSR1\f[R]
reload der hswatchd.rc
.TP
\f[B]SIGUSR2\f[R]
ausgabe der Infodatei
.SH ENVIRONMENT
.TP
Starten, stopppen, service:
siehe Anschnitt: \f[B]SYSTEMD\f[R]
.TP
Konfiguration:
siehe Anschnitt: \f[B]hswatchd.rc\f[R]
.SH SYSTEMD
.PP
Datei erstellen
.PD 0
.P
.PD
:/etc/systemd/system/hswatchd.service
.PP
Inhalt:
.IP
.nf
\f[C]
[Unit]
Description=hswatchd - demon watching files for changing
After=network.target

[Service]
ExecStart=/usr/sbin/hswatchd
ExecStop=/bin/kill -HUP $MAINPID
ExecReload=/bin/kill -USR1 $MAINPID

StandardOutput=null
#StandardOutput=/root/out.txt
#Restart=on-failure

[Install]
WantedBy=multi-user.target
\f[R]
.fi
.PP
#EOF
.PP
Service einrichten (einmalig, started danach automatisch mit):
.IP
.nf
\f[C]
systemctl daemon-reload
systemctl enable hswatchd.service
systemctl start hswatchd.service
systemctl status hswatchd
\f[R]
.fi
.SH hswatchd.rc
.PP
\f[B]Parameter:\f[R]
.TP
set time = ###
Defaultangabe zum verweilen zwischen einer Pruefeinheit.
Ist nicht so wichtig, da die Zeit automatisch errechnet wird.
.TP
set cache = \f[I]true\f[R] oder \f[I]false\f[R]
Die Benutzung des Caches erlauben/verbieten
.TP
set cachepath = \f[I]Pfad_zur_Cachedatei\f[R]
Der Pfad f\[:u]r \[lq]hswatchd.cache\[rq].
Es wird in dieser Datei die sekundengenaue Zeit der letzten Pruefung
jedes file gespeichert.
\f[I]Nur\f[R] der Pfad, die Datei heisst .hswatchd.cache.
.TP
set infofile = \f[I]File_fuer_InfoFile\f[R]
Der vollst\[:a]ndige Pfad zur Datei.
Es wird eine reine Textdatei geschrieben.
Ist Markdown formatierbar
.PP
Jeder Eintrag mit \[lq]file \&....\[rq] in der hswatchd.rc wird in eine
einfach verkettete Liste sortiert, nach naechster Bearbeitungszeit,
aufgenommen.
Dadurch wird erreicht das der naechste zu verarbeitende Datensatz ganz
oben steht.
Die Diff-Zeit wird auch genommen, um die naechste Wartezeit zu setzen.
Ist so ein Datensatz abgearbeitet, wird neu entschieden, wo er in der
Liste zu stehen hat.
Und es wird eine neue Wartezeit bestimmt.
.PP
Konfigurations-Datei erstellen
.PD 0
.P
.PD
:/etc/hswatchd.rc
.PP
Beispiel:
.IP
.nf
\f[C]
# systemweite hswatchd - Configurationsdatei

set time = 5
set cache = true
set cachepath = /var/opt
set infofile = /pub/www/data/watch.txt

file /pub/share/network/stuff.txt       25  /bin/bash /root/bin/doany.sh inplement stuff
file /pub/share/network/admin_hosts     60  cp /pub/share/network/newfile_hosts /etc/hosts
\f[R]
.fi
.PP
#EOF
.SH AUTHORS
.PP
Heiko Stoevesandt - alias Hesti - <hstools@t-online.de>
.SH FEHLER
.PP
Fehler (auch in dieser Manpage) unbedingt bitte melden
